{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}Chat{% endblock title %}

{% block content %}
<div class="container py-5 chat-container">
    <h1 class="text-center mb-4">Chat with Your AI Motivator</h1>

    <div class="chat-box border rounded p-3 mb-4">
        <div class="messages" id="chatMessages">
            {% for message in messages %}
                <div class="message {% if message.is_user %}user-message{% else %}ai-message{% endif %}">
                    <div class="message-text">{{ message.text }}</div>
                </div>
            {% endfor %}
        </div>
    </div>

    <form method="post" class="chat-form">
        {% csrf_token %}
        {{ form|crispy }}
        <button type="submit" class="btn btn-primary w-100">Send</button>
    </form>
</div>

<script>
    // Auto-scroll to latest message
    var chatMessages = document.getElementById("chatMessages");
    chatMessages.scrollTop = chatMessages.scrollHeight;
</script>
{% endblock content %}
